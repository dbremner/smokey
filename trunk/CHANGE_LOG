------------------------------------------------------------------------
r1 | jesjones@mindspring.com | 2008-05-07 19:08:26 -0700 (Wed, 07 May 2008) | 3 lines

Initial import (for googlecode).


------------------------------------------------------------------------
r2 | jesjones@mindspring.com | 2008-05-07 19:19:13 -0700 (Wed, 07 May 2008) | 3 lines

Added.


------------------------------------------------------------------------
r5 | jesjones@mindspring.com | 2008-05-07 21:55:58 -0700 (Wed, 07 May 2008) | 3 lines

Removed.


------------------------------------------------------------------------
r34 | jesjones@mindspring.com | 2008-05-09 16:08:10 -0700 (Fri, 09 May 2008) | 20 lines

Index: source/internal/rules/reliability/AvoidIsAliveRule.cs
Index: source/tests/rules/reliability/AvoidIsAliveTest.cs
Index: source/internal/rules/xml/Reliability.xml
* Added.

Index: source/internal/rules/correctness/NoStaticRemoveRule.cs
Index: source/internal/rules/xml/Correctness.xml
Index: extras/evildoer/Expected.xml
Index: extras/evildoer/StaticRemove.cs
* Added.

Index: source/internal/Program.cs
Index: source/framework/Log.cs
* In debug write to stderr if any warnings or errors appear in the log.

Index: source/framework/support/advanced/ValuesTracker.cs
Index: source/framework/support/advanced/DataFlow.cs
* Don't log warnings if the stack is null because we skipped dataflow.


------------------------------------------------------------------------
r35 | jesjones@mindspring.com | 2008-05-09 16:09:42 -0700 (Fri, 09 May 2008) | 3 lines

These files shouldn't be checked in.


------------------------------------------------------------------------
r36 | jesjones@mindspring.com | 2008-05-10 01:41:40 -0700 (Sat, 10 May 2008) | 11 lines

Index: source/internal/rules/correctness/InconsistentPropertyRule.cs
Index: source/internal/rules/xml/Correctness.xml
Index: extras/evildoer/Props.cs
* Added.

Index: source/internal/rules/correctness/DisposeDoesStaticRemoveRule.cs
Index: extras/evildoer/Expected.xml
Index: extras/evildoer/DisposeRemoves.cs
* Added.


------------------------------------------------------------------------
r43 | jesjones@mindspring.com | 2008-05-11 01:10:05 -0700 (Sun, 11 May 2008) | 21 lines

Index: source/internal/rules/reliability/UnusualMonitor1Rule.cs
Index: source/internal/rules/xml/Reliability.xml
Index: source/tests/rules/reliability/UnusualMonitor1Test.cs
* Added.

Index: source/internal/rules/reliability/UnusualMonitor2Rule.cs
Index: source/tests/rules/reliability/UnusualMonitor2Test.cs
* Added.

Index: source/internal/rules/correctness/InconsistentPropertyRule.cs
Index: source/internal/rules/xml/Correctness.xml
Index: extras/evildoer/Expected.xml
Index: extras/evildoer/Props.cs
* Changed InconsistentProperty so that it only checks trivial properties.

Index: source/internal/Watchdog.cs
Index: source/internal/Progress.cs
* Uses a monitor instead of AutoResetEvent.

Index: gen_match.py
* Added a check to ensure that the start index isn't too large.
------------------------------------------------------------------------
r44 | jesjones@mindspring.com | 2008-05-12 02:56:33 -0700 (Mon, 12 May 2008) | 36 lines

Index: source/internal/rules/reliability/ZeroSleepRule.cs
Index: source/internal/rules/xml/Reliability.xml
Index: source/tests/rules/reliability/ZeroSleepTest.cs
* Added.

Index: source/internal/rules/design/PreferMonitorRule.cs
Index: source/tests/rules/design/PreferMonitorTest.cs
Index: source/internal/rules/xml/Design.xml
Index: extras/evildoer/GoodManagedDisposable.cs
Index: extras/evildoer/GoodClass2.cs
* Added.

Index: source/internal/rules/design/SealedProtectedRule.cs
Index: source/tests/rules/design/SealedProtectedTest.cs
* Added.

Index: source/internal/rules/misc/InconsistentNamespaceRule.cs
Index: source/internal/rules/xml/Misc.xml
Index: extras/evildoer/BadNamespaces.cs
Index: extras/evildoer/Expected.xml
* Added.

Index: source/tests/rules/AssemblyTest.cs
Index: source/tests/rules/MethodTest.cs
* Assert that all the names passed in are unique.

Index: source/framework/support/advanced/ValuesLattice.cs
Index: extras/evildoer/BadClass.cs
* Backed out of the zero trumps other value change.

Index: FxCop Rules.txt
* Added.




------------------------------------------------------------------------
r45 | jesjones@mindspring.com | 2008-05-13 01:03:58 -0700 (Tue, 13 May 2008) | 31 lines

Index: source/internal/rules/reliability/StringUri1Rule.cs
Index: source/internal/rules/xml/Reliability.xml
Index: source/tests/rules/reliability/StringUri1Test.cs
Index: extras/evildoer/Expected.xml
Index: extras/evildoer/StringUri1.cs
* Added.

Index: source/internal/rules/reliability/StringUri2Rule.cs
Index: source/tests/rules/reliability/StringUri2Test.cs
* Added.

Index: source/internal/rules/reliability/StringUri3Rule.cs
Index: source/tests/rules/reliability/StringUri3Test.cs
* Added.

Index: source/internal/rules/design/ArithmeticButNoEqualsRule.cs
Index: source/tests/rules/design/ArithmeticButNoEqualsTest.cs
* Added.

Index: source/internal/rules/design/BadExplicitImplementationRule.cs
Index: source/tests/rules/design/BadExplicitImplementationTest.cs
Index: source/internal/rules/xml/Design.xml
Index: extras/evildoer/GoodClass.cs
* Added.
 
Index: source/internal/rules/reliability/StringUriOverloadRule.cs
* Added.

Index: source/framework/StringExtensions.cs
* Added.

------------------------------------------------------------------------
r46 | jesjones@mindspring.com | 2008-05-14 17:06:02 -0700 (Wed, 14 May 2008) | 28 lines

Index: source/internal/rules/reliability/ValidateArgsRule.cs
Index: source/internal/rules/xml/Reliability.xml
Index: source/tests/rules/reliability/ValidateArgs1Test.cs
Index: extras/evildoer/GoodClass.cs
Index: extras/evildoer/Identical.cs
Index: extras/evildoer/BadClass2.cs
* Added.

Index: source/tests/rules/reliability/ValidateArgs2Test.cs
* Added.

Index: source/internal/rules/globalization/NonLocalizedGuiRule.cs
Index: source/internal/rules/xml/Globalization.xml
Index: source/internal/DumpStrings.cs
Index: extras/evildoer/NonLocalized.cs
Index: extras/evildoer/Expected.xml
Index: extras/miscevil/NoSecurity.cs
* Added.

Index: source/internal/rules/globalization/DataLocaleRule.cs
Index: source/internal/rules/globalization/MessageBoxOptionsRule.cs
Index: source/internal/Program.cs
* Support for new --not-localized switch.

Index: source/framework/StringExtensions.cs
* Added Match.


------------------------------------------------------------------------
r48 | jesjones@mindspring.com | 2008-05-15 01:16:13 -0700 (Thu, 15 May 2008) | 24 lines

Index: source/internal/rules/reliability/ObjectDisposedExceptionRule.cs
Index: extras/evildoer/GoodDisposable.cs
Index: source/internal/rules/xml/Correctness.xml
Index: extras/evildoer/BadDisposable2.cs
Index: source/tests/rules/microsoft/NoObjectDisposedExceptionTest.cs
Index: extras/evildoer/GoodManagedDisposable.cs
Index: extras/evildoer/GoodDisposable2.cs
Index: source/tests/rules/reliability/ObjectDisposedExceptionTest.cs
Index: source/internal/rules/xml/Microsoft.xml
Index: source/internal/rules/xml/Design.xml
Index: source/internal/Watchdog.cs
Index: source/internal/Progress.cs
Index: source/internal/rules/xml/Reliability.xml
* Added.

Index: source/internal/rules/globalization/FormatProviderRule.cs
Index: extras/evildoer/FormatProvider.cs
Index: source/internal/rules/xml/Globalization.xml
Index: extras/evildoer/GoodClass.cs
Index: extras/evildoer/IdenticalBlock.cs
Index: extras/evildoer/BadClass.cs
Index: extras/evildoer/BadClass2.cs
* Added.

------------------------------------------------------------------------
r49 | jesjones@mindspring.com | 2008-05-15 23:43:33 -0700 (Thu, 15 May 2008) | 20 lines

Index: source/internal/rules/security/VisiblePInvokeRule.cs
Index: source/internal/rules/xml/Security.xml
Index: extras/evildoer/GoodClass2.cs
Index: source/tests/rules/security/VisiblePInvokeTest.cs
Index: extras/evildoer/Expected.xml
* Added.

Index: source/internal/rules/correctness/DoubleCheckedLockingRule.cs
Index: source/tests/rules/correctness/DoubleCheckedLockingTest.cs
Index: source/internal/rules/xml/Correctness.xml
* Added.

Index: source/internal/rules/mono/MonoNamingRule.cs
Index: extras/evildoer/BadNaming.cs
Index: extras/evildoer/BadClass2.cs
* Complain if fields start with m_, s_, or ms_.

Index: Gendarme Rules.txt
* Added.

------------------------------------------------------------------------
r50 | jesjones@mindspring.com | 2008-05-16 00:32:46 -0700 (Fri, 16 May 2008) | 14 lines

Index: source/internal/rules/portability/ExitCodeRule.cs
Index: source/tests/rules/portability/ExitCodeTest.cs
* Added check for setting Environment.ExitCode.

Index: source/internal/rules/performance/NotSealedRule.cs
Index: source/internal/rules/xml/Performance.xml
Index: extras/evildoer/GoodClass2.cs
Index: extras/evildoer/BadNaming.cs
Index: extras/evildoer/Expected.xml
Index: extras/evildoer/StaticRemove.cs
Index: extras/evildoer/Implementations.cs
* Added.


------------------------------------------------------------------------
r51 | jesjones@mindspring.com | 2008-05-16 01:54:22 -0700 (Fri, 16 May 2008) | 4 lines

Added BeginTesting and EndTesting. Changed a lot of rules to visit EndTesting
instead of CallGraph.


------------------------------------------------------------------------
r52 | jesjones@mindspring.com | 2008-05-17 00:14:53 -0700 (Sat, 17 May 2008) | 15 lines

Index: source/internal/rules/reliability/RecursiveLock1Rule.cs
Index: source/internal/rules/xml/Reliability.xml
Index: extras/evildoer/RecursiveLock.cs
Index: extras/evildoer/Expected.xml
* Added.

Index: source/internal/rules/reliability/RecursiveLock2Rule.cs
* Added.

Index: source/internal/rules/design/UnusedMethodRule.cs
* Fixed a silly bug that sometimes kept the rule from reporting the results.

Index: gen_match.py
* Generated method is now private (instead of public).

------------------------------------------------------------------------
r53 | jesjones@mindspring.com | 2008-05-17 00:18:27 -0700 (Sat, 17 May 2008) | 3 lines

Use m_lock instead of m_mutex.


------------------------------------------------------------------------
r54 | jesjones@mindspring.com | 2008-05-17 01:04:50 -0700 (Sat, 17 May 2008) | 5 lines

Index: source/internal/rules/misc/NewVersionRule.cs
Index: source/internal/rules/xml/Misc.xml
* Added.


------------------------------------------------------------------------
r55 | jesjones@mindspring.com | 2008-05-17 14:09:43 -0700 (Sat, 17 May 2008) | 3 lines

Moving this.


------------------------------------------------------------------------
r56 | jesjones@mindspring.com | 2008-05-17 15:10:06 -0700 (Sat, 17 May 2008) | 22 lines

Index: source/internal/rules/design/PreferMonitor2Rule.cs
Index: source/tests/rules/design/PreferMonitor2Test.cs
Index: source/internal/rules/xml/Design.xml
* Added.

Index: source/internal/Program.cs
Index: source/internal/CheckItem.cs
Index: source/app/AnalyzeAssembly.cs
* Added -include-check, -include-name, -include-breaking, and -include-localized
  command line switches to enable profile options to be overridden.

Index: source/internal/rules/design/PreferMonitor1Rule.cs
Index: source/internal/rules/design/PreferMonitor1.cs
Index: source/tests/rules/design/PreferMonitor1Test.cs
Index: source/tests/rules/design/PreferMonitorTest.cs
Index: source/internal/rules/design/PreferMonitorRule.cs
Index: extras/evildoer/GoodManagedDisposable.cs
Index: extras/evildoer/GoodClass2.cs
Index: extras/evildoer/Expected.xml
* Renamed.


------------------------------------------------------------------------
r57 | jesjones@mindspring.com | 2008-05-17 22:26:36 -0700 (Sat, 17 May 2008) | 16 lines

Index: source/internal/rules/correctness/Aspell.cs
Index: source/internal/rules/correctness/NativeAspell.cs
* Ignored words are now handled by aspell.
* Added support for new dictionary setting to allow multiple dictionaries to
  be specified. 
* Ignore/dictionary paths now special case "/resources/file" where file is
  SysIgnore.txt or IgnoreList.txt.
* Words with dashes are now treated as multiple words.

Index: nant.build
* Added SysIgnore.txt and IgnoreList.txt to resources.

Index: IgnoreList.txt
* Removed words with dashes.


------------------------------------------------------------------------
r58 | jesjones@mindspring.com | 2008-05-18 05:04:06 -0700 (Sun, 18 May 2008) | 27 lines

Index: source/internal/Program.cs
* First cut at profile support. 

Index: source/internal/Watchdog.cs
* Abort the main thread if we time out instead of Environment.Exit so we get some information
  about the stack at the point we're hanging.
  
Index: source/internal/CheckItem.cs
* Does a Log.ErrorLine if xml has a violation with no associated rule (in debug).

Index: SysIgnore.txt
* Removed words with dashes.

Index: source/internal/HtmlViolations.cs
* Added breaking field to output.

Index: source/internal/rules/reliability/RecursiveLock1Rule.cs
Index: source/internal/rules/reliability/RecursiveLock2Rule.cs
* Reduced the maximum recursion depth from 20 to 8 (20 was making the rules take over 30 seconds).

Index: source/internal/rules/correctness/Aspell.cs
* Improved error handling a bit.
 		
Index: source/internal/rules/correctness/UseSetterValueRule.cs
* Can't just check the property name to identify indexers, need to use parameter count as well.


------------------------------------------------------------------------
r59 | jesjones@mindspring.com | 2008-05-18 21:57:34 -0700 (Sun, 18 May 2008) | 37 lines

Index: source/internal/rules/design/PublicImplementationRule.cs
* Only fire if none of the new public methods are called.

Index: source/internal/rules/design/UnusedMethodRule.cs
* Fixed (it only worked half the time).

Index: source/tests/rules/design/EqualityOperatorTest.cs
Index: source/internal/rules/design/EqualityOperatorRule.cs
* Ignore private structs.

Index: source/internal/CheckItem.cs
* CompilerGenerated methods are now checked so that anonymous delegates are
  properly processed. This means that rules may need to special case these types.
  
Index: source/tests/rules/performance/UseEmptyTypesTest.cs
Index: source/internal/rules/performance/UseEmptyTypesRule.cs
* Fixed so that it only fires if the type is "System.Type".

Index: install.sh
* Doesn't overwrite smokey.exe.config if it already exists.

Index: source/app/AnalyzeAssembly.cs
Index: source/framework/support/MethodMatcher.cs
Index: source/framework/StringExtensions.cs
Index: source/framework/support/CecilExtensions.cs
Index: source/framework/support/advanced/ClassifyMethod.cs
Index: source/framework/support/AssemblyCache.cs
* Added some asserts.

Index: source/internal/Program.cs
* Main no longer returns negative ints.

Index: source/tests/V0.cs
...
* Sealed lots and lots of classes.


------------------------------------------------------------------------
r60 | jesjones@mindspring.com | 2008-05-19 19:12:06 -0700 (Mon, 19 May 2008) | 39 lines

Index: OLD_CHANGE_LOG
* Added.

Index: source/internal/rules/design/UseBaseTypesRule.cs
Index: source/tests/rules/design/UseBaseTypesTest1.cs
* Special case types that start with _, notably _Exception and _Type.

Index: source/internal/rules/xml/Security.xml
Index: source/internal/rules/xml/Design.xml
* Refer to the wiki not the README.

Index: source/internal/rules/performance/StructOverridesRule.cs
Index: source/internal/rules/performance/InlineStaticInitRule.cs
Index: source/internal/rules/design/UnusedMethodRule.cs
* Reinstate IsCompilerGenerated check.

Index: source/internal/rules/performance/NotSealedRule.cs
* Add IsCompilerGenerated check.

Index: source/internal/rules/reliability/StaticSetterRule.cs
Index: source/internal/rules/reliability/CtorCallsVirtualRule.cs
* Improved details formatting.

Index: source/internal/rules/correctness/UnprotectedEventRule.cs
* Rewrote to be simpler and to work with the weird, hard to reproduce, Shan code.

Index: source/internal/rules/misc/InconsistentNamespaceRule.cs
* Skip the rule if the directory names include '.'.

Index: source/internal/Program.cs
* Tweak system profile.

Index: source/framework/support/CecilExtensions.cs
* Added check to IsCompilerGenerated for "<PrivateImplementationDetails>".
 
Index: custom/source/rules/Rules.xml
* Added breaking attributes.


------------------------------------------------------------------------
r64 | jesjones@mindspring.com | 2008-05-19 23:51:10 -0700 (Mon, 19 May 2008) | 10 lines

Index: CHANGES
Index: nant.build
Index: CHANGE_LOG
Index: Upload Comment.txt
* Updated.

Index: source/internal/rules/xml/Design.xml
Index: source/internal/rules/xml/Reliability.xml
* Minor language tweaks.

------------------------------------------------------------------------
r67 | jesjones@mindspring.com | 2008-06-09 16:40:22 -0700 (Mon, 09 Jun 2008) | 15 lines

Index: Makefile
* Moving from nant to make.

Index: get_version.sh
Index: gen_version.sh
* New, bit simpler, way to bump build numbers.

Index: extras/evildoer/Expected.xml
Index: extras/miscevil/NoSecurity.xml
Index: extras/miscevil/APTCA.xml
Index: extras/miscevil/APTCA2.xml
Index: extras/miscevil/APTCA3.xml
* Debug assemblies names are no longer appended with _d.


------------------------------------------------------------------------
r68 | jesjones@mindspring.com | 2008-06-09 22:02:52 -0700 (Mon, 09 Jun 2008) | 11 lines

Index: Makefile
* Added PROFILE support.
* Added smoke, help, install, uninstall, and tar targets.
 	
Index: BumpBuildNumber.sh
Index: nant.build
Index: uninstall.sh
Index: install.sh
* Removed.


------------------------------------------------------------------------
r69 | jesjones@mindspring.com | 2008-06-10 02:43:58 -0700 (Tue, 10 Jun 2008) | 40 lines

Index: source/internal/rules/design/AvoidReRegisterForFinalizeRule.cs
Index: source/tests/rules/design/AvoidReRegisterForFinalizeTest.cs
Index: source/internal/rules/xml/Design.xml
* Added.

Index: source/internal/rules/correctness/DisposeDoesStaticRemoveRule.cs
Index: source/internal/rules/xml/Correctness.xml
Index: extras/evildoer/DisposeRemoves.cs
Index: extras/evildoer/Expected.xml
* Removed DisposeDoesStaticRemoveRule.

Index: source/internal/rules/microsoft/AttributesNeedUsageRule.cs
Index: source/internal/rules/xml/Microsoft.xml
Index: source/tests/rules/microsoft/AttributesNeedUsageTest.cs
* Don't complain if the type is abstract.

Index: source/internal/rules/reliability/NonSerializableFieldRule.cs
Index: source/tests/rules/reliability/NonSerializableFieldTest.cs
Index: source/internal/rules/xml/Reliability.xml
* Don't complain if the type implements ISerializable.

Index: source/tests/rules/design/CastOpAlternativeTest.cs
Index: source/internal/rules/design/CastOpAlternativeRule.cs
* Don't complain if the type is only missing FromFooType.

Index: source/internal/rules/design/UnusedMethodRule.cs
* Don't complain if the method is decorated with an attribute which disables the rule.
* Don't complain about the () and (SerializationInfo, StreamingContext) constructors if
  the type is serializeable.
* Don't complain about inner exception constructors.
* Don't complain about (IntPtr) constructors for types descending from Objc3.NSObject.

Index: source/internal/CheckItem.cs
Index: source/internal/Program.cs
* Don't terminate if a custom rule can't be loaded.

Index: Makefile
* Added fcheck1 target.


------------------------------------------------------------------------
r71 | jesjones@mindspring.com | 2008-06-10 19:41:27 -0700 (Tue, 10 Jun 2008) | 47 lines

Index: source/internal/rules/design/HashUsesXorRule.cs
Index: source/internal/rules/xml/Design.xml
Index: source/tests/rules/design/HashUsesXorTest.cs
* Added.

Index: source/internal/rules/correctness/ArgumentException1Rule.cs
Index: source/tests/rules/correctness/ArgumentException1Test.cs
* Added.

Index: source/internal/rules/correctness/ArgumentException2Rule.cs
Index: source/tests/rules/correctness/ArgumentException2Test.cs
* Added.

Index: source/internal/rules/correctness/UnusedArgRule.cs
Index: source/tests/rules/correctness/UnusedArgTest.cs
Index: source/internal/rules/xml/Correctness.xml
Index: source/internal/Unused.cs
* Added.

Index: source/internal/rules/reliability/Const2Rule.cs
Index: source/internal/rules/security/ReadOnlyArrayRule.cs
Index: source/tests/rules/reliability/Const2Test.cs
Index: source/internal/rules/xml/Security.xml
Index: source/tests/rules/security/ReadOnlyArrayTest.cs
* Only complain if the type is public.

Index: source/internal/rules/xml/Microsoft.xml
Index: source/internal/rules/xml/Reliability.xml
* Fixed Dispose language to make it clear that managed fields can always be used
  but finalizeable fields cannot.
   
Index: source/internal/rules/microsoft/DisposableButNoFinalizerRule.cs
Index: source/internal/rules/microsoft/IDisposableWithoutSuppressFinalizeRule.cs
Index: source/internal/rules/reliability/DisposeNativeResourcesRule.cs
Index: source/framework/support/CecilExtensions.cs
Index: extras/evildoer/BadClass2.cs
* Fields that are collections of IntPtr are now considered to be native types.

Index: source/internal/rules/design/UnusedMethodRule.cs
Index: extras/evildoer/GoodClass2.cs
Index: extras/evildoer/Expected.xml
* Don't complain for custom event add/remove methods.
* Can now disable the rule for derived ctors by decorating a base class ctor.
* Removed the ObjC3.NSObject check.
* Sort results by declaring type and method name, not by return type.


------------------------------------------------------------------------
r72 | jesjones@mindspring.com | 2008-06-10 21:28:58 -0700 (Tue, 10 Jun 2008) | 18 lines

Index: source/tests/rules/EventTest.cs
Index: source/tests/rules/TypeTest.cs
Index: source/tests/rules/MethodTest.cs
Index: source/tests/rules/CecilTest.cs
Index: source/tests/rules/AssemblyTest.cs
* Tests clear their type lists when the fixture finishes.
* AssemblyFactory is only called once.
* These two changes make the tests run much much faster.

Index: extras/evildoer/GoodClass.cs
Index: extras/evildoer/BadStruct.cs
Index: extras/evildoer/GoodClass2.cs
Index: extras/evildoer/Expected.xml
Index: extras/evildoer/GoodStruct.cs
Index: Makefile
* Updated.


------------------------------------------------------------------------
r73 | jesjones@mindspring.com | 2008-06-11 01:30:31 -0700 (Wed, 11 Jun 2008) | 13 lines

Index: extras/evildoer/BadClass2.cs
Index: extras/evildoer/BigNamespace.cs
Index: extras/evildoer/BadNaming.cs
Index: extras/evildoer/Expected.xml
Index: source/internal/rules/design/IdentifierCasingRule.cs
Index: source/internal/rules/xml/Design.xml
* Added.

Index: Makefile
* Use gmcs response files so we can print the gmcs command lines as we build without
  writing out tons of .cs files.
  

------------------------------------------------------------------------
r74 | jesjones@mindspring.com | 2008-06-11 05:21:06 -0700 (Wed, 11 Jun 2008) | 24 lines

Index: source/internal/rules/design/PropertyMatchesAccessorRule.cs
Index: extras/evildoer/BadClass.cs
Index: extras/evildoer/Expected.xml
Index: source/internal/rules/xml/Design.xml
Index: source/tests/rules/design/PropertyMatchesAccessorTest.cs
* Added.

Index: source/internal/rules/xml/Performance.xml
* Added.

Index: source/internal/rules/performance/PropertyReturnsCollectionRule.cs
Index: extras/evildoer/BadClass2.cs
* Added.

Index: source/internal/rules/performance/TooManyLocalsRule.cs
* Added.

Index: source/internal/rules/design/IdentifierCasingRule.cs
* Only consider externally visible types.

Index: source/internal/rules/design/IdenticalMethodsRule.cs
* Made the results deterministic (I think).
 						 

------------------------------------------------------------------------
r75 | jesjones@mindspring.com | 2008-06-11 06:05:59 -0700 (Wed, 11 Jun 2008) | 3 lines

Minor smoke fixes.


------------------------------------------------------------------------
r76 | jesjones@mindspring.com | 2008-06-11 20:59:08 -0700 (Wed, 11 Jun 2008) | 30 lines

Index: source/tests/rules/correctness/ArgumentException2Test.cs
Index: source/internal/rules/correctness/ArgumentException2Rule.cs
* Special case properties.
 						
Index: source/internal/rules/design/CastOpAlternativeRule.cs
* Add details.

Index: source/internal/rules/design/PropertyMatchesAccessorRule.cs
* Only complain if a public Get or Set method is found.

Index: source/tests/rules/CecilTest.cs
Index: source/tests/rules/AssemblyTest.cs
Index: source/tests/rules/MethodTest.cs
Index: source/tests/rules/EventTest.cs
Index: source/tests/rules/TypeTest.cs
* Tweaked so custom dll's can again specify the assembly location.

Index: source/app/AnalyzeAssembly.cs
* Removed some unused args.

Index: Makefile
* Targets are rebuilt if CSC_FLAGS changes.
* bin is created as a side effect of variable expansion instead of via a target.
* install target only copies config file is one isn't there already.

Index: custom/Makefile
Index: custom/nant.build
* Replaced the old nant file with a make file.


------------------------------------------------------------------------
r77 | jesjones@mindspring.com | 2008-06-12 00:45:23 -0700 (Thu, 12 Jun 2008) | 10 lines

Index: CHANGES
Index: README
* Updated.

Index: Makefile
Index: extras/Makefile
* Moved install and uninstall targets into their own make file so we can use it for
  the binary distro.
  

------------------------------------------------------------------------
r82 | jesjones@mindspring.com | 2008-08-10 14:36:48 -0700 (Sun, 10 Aug 2008) | 3 lines

Added InvalidEnumFlagsRule.


------------------------------------------------------------------------
r83 | jesjones@mindspring.com | 2008-08-10 20:23:11 -0700 (Sun, 10 Aug 2008) | 3 lines

Added HashButNoEqualsRule.


------------------------------------------------------------------------
r84 | jesjones@mindspring.com | 2008-08-11 19:51:54 -0700 (Mon, 11 Aug 2008) | 24 lines

Index: source/internal/rules/design/ThreadNameRule.cs
Index: source/internal/rules/xml/Design.xml
Index: source/tests/rules/design/ThreadNameTest.cs
* Added ThreadNameRule.

Index: source/internal/rules/microsoft/NetNamingRule.cs
Index: source/internal/rules/mono/MonoNamingRule.cs
Index: custom/source/rules/PrivateNeedsDoRule.cs
* Ignore methods that start with a '<'.

Index: source/internal/rules/microsoft/SynchronizedAttributeRule.cs
* Ignore add_ and remove_ methods.

Index: source/internal/rules/design/ExceptionConstructorsRule.cs
* Ignore internal and private types.

Index: source/internal/rules/correctness/Aspell.cs
* Write a message to stderr if aspell isn't installed (instead of reporting
  a bug in smokey).
  
Index: source/internal/rules/misc/JurassicNamingRule.cs
* Ignore public fields.


------------------------------------------------------------------------
r85 | jesjones@mindspring.com | 2008-10-09 01:13:06 -0700 (Thu, 09 Oct 2008) | 3 lines

Special case enums (they are serializable but not decorated with ISerializable).


------------------------------------------------------------------------
r86 | jesjones@mindspring.com | 2008-10-09 02:04:48 -0700 (Thu, 09 Oct 2008) | 7 lines

* Fixed quite a few rules that were only supposed to fire for externally visible 
  types to not fire for public types nested in an internal type.
* InternalExceptionRule prints the first four externally visible types in the assembly
  which makes it a lot easier to figure out what's going on for assemblies which should
  not have externally visible types.


------------------------------------------------------------------------
r87 | jesjones@mindspring.com | 2008-10-09 14:26:38 -0700 (Thu, 09 Oct 2008) | 14 lines

Index: source/internal/rules/security/TransparentAssertRule1.cs
Index: source/internal/rules/security/TransparentAssertRule2.cs
* No longer throws when -only-type switch is used.

Index: source/internal/rules/design/GodClassRule.cs
* Special case generics so we treat the original generic type and the generic
  arguments separately.
  
Index: source/internal/rules/reliability/NonSerializableFieldRule.cs
* Enums are serializeable even though they are not ISerializable.

Index: source/internal/CheckItem.cs
* Log the number of rules we found so we can get a better count of our rules.

------------------------------------------------------------------------
r88 | jesjones@mindspring.com | 2008-10-09 20:04:15 -0700 (Thu, 09 Oct 2008) | 5 lines

* Replaced some existing rules with new, more general, rules. The new rules are DisposableRule, 
  DerivedDisposableRule, FinalizeableRule and in this first pass do pretty much what the old 
  rules do although the new rules are more efficient.
* TypeTest will now visit methods so we can test inter-procedural rules.

------------------------------------------------------------------------
r89 | jesjones@mindspring.com | 2008-10-09 20:10:37 -0700 (Thu, 09 Oct 2008) | 8 lines

* Removed the rules which were replaced:
  BaseDisposableRule
  DisposeFieldsRule
  EmptyFinalizerRule
  IDisposableWithoutSuppressFinalizeRule
  NoObjectDisposedExceptionRule
  OverridenFinalizerRule

------------------------------------------------------------------------
r90 | jesjones@mindspring.com | 2008-10-10 00:18:49 -0700 (Fri, 10 Oct 2008) | 12 lines

* DisposableRule now also checks for
	- The type has a method named Dispose with an unusual signature.
	- The type has non-private methods named OnDispose or DoDispose.
	- Dispose() should not be virtual (although Dispose(bool) may be).
	- If the type is sealed and has Dispose(bool) then it should be private.
	- If the type is not sealed and has Dispose(bool) then it should be protected and virtual.
	- A Dispose method throws an exception it does not catch. 
	- A struct has unmanaged fields. 
	- Dispose(bool) needs to check to see if a field is null before using it.
* RuleDispatcher does a better job logging inner exceptions when a rule throws.


------------------------------------------------------------------------
r91 | jesjones@mindspring.com | 2008-10-10 18:08:23 -0700 (Fri, 10 Oct 2008) | 7 lines

* Added BaseDisposableRule.
* DerivedDisposableRule now checks for:
	- don't (re)implement IDisposable.
	- don't include a new or overriden Dispose() method.
* FinalizerRule now checks for:
	- the finalizer throws but does not catch.
	- the type does not implement IDisposable. 
------------------------------------------------------------------------
r92 | jesjones@mindspring.com | 2008-10-10 18:40:04 -0700 (Fri, 10 Oct 2008) | 3 lines

Reorganized CecilExtensions.


------------------------------------------------------------------------
r93 | jesjones@mindspring.com | 2008-10-10 20:20:23 -0700 (Fri, 10 Oct 2008) | 3 lines

Removing this


------------------------------------------------------------------------
r94 | jesjones@mindspring.com | 2008-10-10 20:22:00 -0700 (Fri, 10 Oct 2008) | 6 lines

* DisposeNativeResources now fires if the type is not IDisposable instead of checking
  for Dispose methods.
* The code that checks to see if a field is owned by a type now catches more cases.
  This affects the Disposable and DisposableFields rules.
  

------------------------------------------------------------------------
r95 | jesjones@mindspring.com | 2008-10-10 20:47:22 -0700 (Fri, 10 Oct 2008) | 6 lines

* Renamed ClassOrBaseImplements TypeOrBaseImplements.
* Renamed Implements TypeImplements.
* Removed IsDisposable class (use TypeOrBaseImplements).



------------------------------------------------------------------------
r96 | jesjones@mindspring.com | 2008-10-10 21:00:48 -0700 (Fri, 10 Oct 2008) | 3 lines

* Removed DisposableButNoFinalizer rule (DisposeNativeResources handles it).


------------------------------------------------------------------------
r99 | jesjones@mindspring.com | 2008-10-11 01:27:21 -0700 (Sat, 11 Oct 2008) | 12 lines

Index: source/internal/rules/design/PreferSafeHandleRule.cs
Index: source/tests/rules/design/PreferSafeHandleTest.cs
Index: source/internal/rules/xml/Design.xml
* Added.

Index: source/internal/rules/xml/Portability.xml
Index: source/internal/rules/xml/Security.xml
* Made NativeMethods class partial in the example code.

Index: source/internal/rules/design/DisposableRule.cs
* Don't complain about getters missing throwing ObjectDisposedException.

------------------------------------------------------------------------
r100 | jesjones@mindspring.com | 2008-10-11 10:23:43 -0700 (Sat, 11 Oct 2008) | 5 lines

Index: source/internal/rules/correctness/Aspell.cs
Index: source/internal/rules/correctness/AspellHandles.cs
* Uses SafeHandle.


------------------------------------------------------------------------
r101 | jesjones@mindspring.com | 2008-10-11 10:35:23 -0700 (Sat, 11 Oct 2008) | 3 lines

Index: source/internal/rules/security/SecureOverridesRule.cs
* Method has to be overridable as well as virtual.

------------------------------------------------------------------------
r102 | jesjones@mindspring.com | 2008-10-11 12:21:48 -0700 (Sat, 11 Oct 2008) | 4 lines

* Uses the new Matches and Reuses extension methods so we can do a more consistent job
  of matching standard methods like Equals and GetHashCode.
  

------------------------------------------------------------------------
r103 | jesjones@mindspring.com | 2008-10-11 19:02:06 -0700 (Sat, 11 Oct 2008) | 5 lines

Index: source/internal/rules/correctness/EqualsMissesStateRule.cs
Index: source/tests/rules/correctness/EqualsMissesStateTest.cs
Index: source/internal/rules/xml/Correctness.xml
* Added.

------------------------------------------------------------------------
r104 | jesjones@mindspring.com | 2008-10-12 00:33:34 -0700 (Sun, 12 Oct 2008) | 17 lines

Index: source/internal/rules/performance/UseIEquatableRule.cs
Index: source/tests/rules/performance/UseIEquatableTest.cs
* Added.

Index: source/internal/rules/mono/MonoNamingRule.cs
Index: source/internal/rules/misc/JurassicNamingRule.cs
* Works better with the fields generated by automatic properties.

Index: source/internal/rules/xml/Performance.xml
Index: source/internal/rules/xml/Microsoft.xml
Index: source/internal/rules/xml/Security.xml
Index: source/internal/rules/xml/Design.xml
Index: source/internal/rules/xml/Reliability.xml
Index: source/internal/rules/xml/Correctness.xml
* Tweaked the GetHashCode examples.
* Use automatic properties.

------------------------------------------------------------------------
r105 | jesjones@mindspring.com | 2008-10-12 14:29:10 -0700 (Sun, 12 Oct 2008) | 12 lines

Index: source/internal/rules/correctness/ConstantResultRule.cs
Index: source/tests/rules/correctness/ConstantResultTest.cs
Index: source/internal/rules/xml/Correctness.xml
* Added.

Index: source/internal/rules/correctness/RedundantOperandRule.cs
Index: source/tests/rules/correctness/RedundantOperandTest.cs
* Added.
 	
Index: source/internal/rules/microsoft/EqualsRequiresNullCheckRule.cs
* Checks Equals(T) methods when T implements IEquatable<T>.

------------------------------------------------------------------------
r106 | jesjones@mindspring.com | 2008-10-12 14:40:35 -0700 (Sun, 12 Oct 2008) | 4 lines

Removed Ignore. Changed Unused so that it has a Value setter instead of an Args
method.


------------------------------------------------------------------------
r107 | jesjones@mindspring.com | 2008-10-12 22:01:36 -0700 (Sun, 12 Oct 2008) | 6 lines

Index: source/internal/rules/reliability/ThreadSafeAttrRule.cs
Index: source/tests/rules/reliability/ThreadSafeAttrTest.cs
Index: source/internal/rules/xml/Reliability.xml
* Added.


------------------------------------------------------------------------
r109 | jesjones@mindspring.com | 2008-10-12 23:05:23 -0700 (Sun, 12 Oct 2008) | 9 lines

Index: source/internal/rules/reliability/ThreadAbortRule.cs
Index: source/tests/rules/reliability/ThreadAbortTest.cs
Index: source/internal/rules/xml/Reliability.xml
* Added.
 	
Index: source/framework/DisableRuleAttribute.cs
* Use automatic properties.


------------------------------------------------------------------------
r111 | jesjones@mindspring.com | 2008-10-13 11:42:56 -0700 (Mon, 13 Oct 2008) | 9 lines

Index: source/internal/rules/design/SealedProtectedRule.cs
* Rewrote to remove some false positives.

Index: source/internal/rules/reliability/UnusualMonitor1Rule.cs
* Fixed a false positive with static locks.

Index: source/internal/rules/correctness/UnusedArgRule.cs
* Ignore delegate methods.

------------------------------------------------------------------------
r112 | jesjones@mindspring.com | 2008-10-13 13:43:24 -0700 (Mon, 13 Oct 2008) | 9 lines

Index: source/internal/rules/reliability/ThreadSafeAttrRule.cs
* Replaced ThreadSingleRootAttribute with ThreadRootAttribute.
* Removed ThreadMultiRootAttribute (use ThreadSafeAttribute instead).
* ThreadSafeAttribute can now be applied to classes and structs.

Index: source/internal/rules/design/DisposableRule.cs
* Instead of checking for private Dispose(bool) in sealed types check for public
  Dispose() in all types.

------------------------------------------------------------------------
r113 | jesjones@mindspring.com | 2008-10-13 16:49:44 -0700 (Mon, 13 Oct 2008) | 50 lines

Index: source/internal/rules/reliability/SerializableAttributeRule.cs
* Added.

Index: source/internal/rules/reliability/ISerializableMethodsRule.cs
* Added.
 
Index: source/internal/rules/design/ExceptionConstructorsRule.cs
* No longer complains about missing default ctors.

Index: source/internal/rules/design/TooManyArgsRule.cs
* Ignore private methods.

Index: source/internal/rules/correctness/NoSerializableAttributeRule.cs
* Checks all types, not just the externally visible ones.

Index: source/internal/rules/correctness/UnrelatedEqualsRule.cs
Index: source/internal/rules/correctness/NanTestRule.cs
Index: source/internal/rules/correctness/EqualsMissesStateRule.cs
Index: source/internal/rules/correctness/StringIndexOfRule.cs
Index: source/internal/rules/correctness/ArrayIndexOfRule.cs
Index: source/internal/rules/misc/SortedMethodsRule.cs
Index: source/internal/GetOptions.cs
Index: source/internal/Watchdog.cs
Index: source/internal/Unused.cs
Index: source/internal/Progress.cs
Index: source/framework/DisableRuleAttribute.cs
Index: source/framework/StringExtensions.cs
Index: source/framework/support/CecilExtensions.cs
Index: source/framework/support/advanced/BasicBlock.cs
Index: source/framework/support/advanced/ClassifyMethod.cs
Index: source/framework/support/advanced/ValuesState.cs
Index: source/framework/DBC.cs
Index: source/internal/rules/correctness/Aspell.cs
Index: source/internal/rules/correctness/AspellHandles.cs
Index: source/internal/rules/reliability/UnusualMonitor1Rule.cs
Index: source/internal/rules/reliability/ThreadSafeAttrRule.cs
Index: source/internal/rules/design/ThreadNameRule.cs
Index: source/internal/rules/design/FinalizeableRule.cs
Index: source/internal/rules/design/DisposableRule.cs
Index: source/internal/rules/design/SchizoidTypeRule.cs
Index: source/internal/rules/portability/SpecialFolderRule.cs
Index: source/internal/AssertTraceListener.cs
Index: IgnoreList.txt
* Smoke target tweaks.

Index: source/tests/rules/TypeTest.cs
* Visit constructors.



------------------------------------------------------------------------
r114 | jesjones@mindspring.com | 2008-10-13 20:03:08 -0700 (Mon, 13 Oct 2008) | 3 lines

Removing this.


------------------------------------------------------------------------
r115 | jesjones@mindspring.com | 2008-10-13 20:03:58 -0700 (Mon, 13 Oct 2008) | 12 lines

Index: source/internal/rules/correctness/Aspell.cs
Index: source/internal/rules/xml/Correctness.xml
* Removed ignoreList setting (use dictionary instead).

Index: source/tests/rules/AssemblyTest.cs
* Can now test multiple types at once.

Index: extras/evildoer/Identical.cs
Index: source/tests/rules/design/IdenticalMethodsTest.cs
* Made these tests a unit test instead of part of ftest.

 
------------------------------------------------------------------------
r116 | jesjones@mindspring.com | 2008-10-14 00:05:51 -0700 (Tue, 14 Oct 2008) | 19 lines

Index: source/internal/rules/design/TemplateMethodRule.cs
* Ignore private types.

Index: source/internal/rules/design/IdenticalMethodsRule.cs
* Don't require the method names to match.

Index: source/internal/rules/design/DisposableRule.cs
* Ignore event add_ and remove_ methods.

Index: source/internal/rules/design/BaseDisposableRule.cs
* Ignore types that re-implement IDisposable.

Index: source/internal/rules/design/DerivedDisposableRule.cs
* Don't warn about re-implementing IDisposable (but still do for new Dispose() methods).

Index: source/internal/rules/correctness/RedundantOperandRule.cs
* Special case some code used to return a true value.
 			

------------------------------------------------------------------------
r117 | jesjones@mindspring.com | 2008-10-14 22:18:54 -0700 (Tue, 14 Oct 2008) | 31 lines

Index: source/internal/rules/reliability/StaticSetterRule.cs
* Don't fire if the write is volatile and atomic.

Index: source/internal/rules/design/GodClassRule.cs
* Fire for over 60 types instead of over 40 types.
* Checks more instruction types for type references.
* Skips compiler generated types.

Index: source/internal/rules/microsoft/NetNamingRule.cs
Index: source/internal/rules/mono/MonoNamingRule.cs
Index: source/internal/rules/misc/JurassicNamingRule.cs
* Skip fields starting with $ and types like P1`1.

Index: source/internal/rules/performance/NotInstantiatedRule.cs
* Skip compiler generated types.

Index: source/tests/rules/AssemblyTest.cs
* Visit BeginTypes and EndTypes.

Index: source/internal/rules/reliability/ThreadSafeAttrRule.cs
* If the type is marked thread safe don't complain if some of its methods are
  only called from a single thread.
  
Index: source/framework/support/CecilExtensions.cs
* Treat anonymous types as compiler generated.
* IsSubClass uses new TypeKey class so it works better with generics.

Index: source/framework/support/AssemblyCache.cs
* Does a better job finding type definitions for generics.
 		
 
------------------------------------------------------------------------
r118 | jesjones@mindspring.com | 2008-10-15 00:14:00 -0700 (Wed, 15 Oct 2008) | 10 lines

Index: source/internal/rules/design/ConfusingDisposeRule.cs
Index: source/tests/rules/design/ConfusingDisposeTest.cs
Index: source/internal/rules/xml/Design.xml
* Added.

Index: source/internal/rules/reliability/ThreadSafeAttrRule.cs
* Checks for types marked thread safe, but all of its methods are called
  from one thread. 
  

------------------------------------------------------------------------
r119 | jesjones@mindspring.com | 2008-10-15 01:23:41 -0700 (Wed, 15 Oct 2008) | 8 lines

Index: source/internal/rules/performance/NotInstantiatedRule.cs
* Do a better job with generic structs.

Index: source/framework/support/AssemblyCache.cs
* FindMethod no longer uses MetadataToken's (doesn't really work with generics). Instead
  it finds the type definition and then asks it for the method definition.


------------------------------------------------------------------------
r120 | jesjones@mindspring.com | 2008-10-16 15:49:14 -0700 (Thu, 16 Oct 2008) | 20 lines

Index: source/internal/rules/security/MutableFieldRule.cs
Index: source/tests/rules/security/MutableFieldTest.cs
Index: source/internal/rules/xml/Security.xml
* Added.

Index: source/internal/rules/security/VisiblePointerRule.cs
Index: source/tests/rules/security/VisiblePointerTest.cs

Index: source/internal/TextReport.cs
Index: source/internal/CheckItem.cs
Index: source/internal/XmlReport.cs
Index: source/framework/SymbolTable.cs
Index: source/framework/Location.cs
* Don't print "File: <unknown>" any more.
* Do print the offset into the method if we don't know the line number.

Index: source/framework/support/RuleDispatcher.cs
* Don't print "Outer Exception" if there is no inner exception.


------------------------------------------------------------------------
r121 | jesjones@mindspring.com | 2008-10-16 21:23:16 -0700 (Thu, 16 Oct 2008) | 7 lines

Index: source/framework/instructions/Call.cs
* Added GetThisIndex.

Index: source/framework/support/CecilExtensions.cs
* ExternallyVisible(Method) now returns true if the method is family.


------------------------------------------------------------------------
r122 | jesjones@mindspring.com | 2008-10-16 22:08:48 -0700 (Thu, 16 Oct 2008) | 14 lines

Index: source/internal/rules/globalization/FormatProviderRule.cs
Index: source/internal/rules/correctness/NoStaticRemoveRule.cs
Index: source/internal/rules/reliability/RecursiveLock2Rule.cs
Index: source/internal/rules/reliability/ValidateArgsRule.cs
Index: source/internal/rules/design/UseBaseTypesRule.cs
* Use new Call.GetThisIndex method.

Index: source/framework/support/MethodInfo.cs
Index: source/framework/support/RuleDispatcher.cs
Index: source/internal/rules/design/IdenticalCodeBlocksRule.cs
Index: source/internal/rules/design/IdenticalMethodsRule.cs
* Reset MethodInfo::Instructions, Graph, and Tracker to null aftr visiting the method.
  Should free up quite a bit of memory for large assemblies.

------------------------------------------------------------------------
r123 | jesjones@mindspring.com | 2008-10-18 20:28:00 -0700 (Sat, 18 Oct 2008) | 14 lines

Index: source/framework/SymbolTable.cs
* Rewrote using Cecil instead of the undocumented Mono.CompilerServices.SymbolWriter.
  Unfortunately Cecil won't always give us line numbers.

Index: source/framework/support/CecilExtensions.cs
* Catch a few more weird names as mono 2.0 compiler generated names.

Index: source/internal/rules/reliability/StaticSetterRule.cs
* Volatile fields have weird names with mono 2.0.
 						
Index: source/internal/rules/globalization/FormatProviderRule.cs
* Check to see if the method instead of just the type is compiler generated.


------------------------------------------------------------------------
r124 | jesjones@mindspring.com | 2008-10-19 01:09:41 -0700 (Sun, 19 Oct 2008) | 6 lines

Index: source/internal/rules/design/HashUsesXorRule.cs
* Skip compiler generated methods.
 			 		 			
Index: source/framework/support/CecilExtensions.cs
* Update IsCompilerGenerated for mono 2.0.

------------------------------------------------------------------------
r125 | jesjones@mindspring.com | 2008-10-19 14:20:41 -0700 (Sun, 19 Oct 2008) | 6 lines

Index: source/framework/support/MethodInfo.cs
* Lazily create ControlFlowGraph and Tracker.

Index: source/framework/DBC.cs
* Can rely on Conditional now.

------------------------------------------------------------------------
r126 | jesjones@mindspring.com | 2008-10-19 15:08:57 -0700 (Sun, 19 Oct 2008) | 4 lines

Starting big rewrite: disabled rules, unit tests for rules, cecil extensions, and 
typed instructions.


------------------------------------------------------------------------
r127 | jesjones@mindspring.com | 2008-10-19 21:23:39 -0700 (Sun, 19 Oct 2008) | 3 lines

Deferring the rewrite for now.


------------------------------------------------------------------------
r128 | jesjones@mindspring.com | 2008-10-19 22:44:00 -0700 (Sun, 19 Oct 2008) | 7 lines

Index: source/internal/rules/design/SchizoidTypeRule.cs
* Ignore field names containing a "$".

Index: source/internal/rules/reliability/SerializableAttributeRule.cs
* Ignore private types.


------------------------------------------------------------------------
